# تقرير مراجعة التنسيق والجرافيكس في المنصة

**تاريخ المراجعة:** 2026-02-14  
**النطاق:** الواجهة الأمامية فقط (UI/UX/CSS) بدون أي تعديل على النصوص النظامية أو القانونية.  
**المنهجية:** مراجعة بصرية-كودية لعناصر التنقل، صفحات البحث، وتناسق الهوية اللونية والطباعة.

---

## الملخص التنفيذي

المنصة جيدة أساسًا من ناحية البنية، لكن توجد مشاكل تنسيق/جرافيكس تؤثر مباشرة على الوضوح، التناسق، وتجربة الاستخدام خصوصًا في صفحات البحث. أهم الملاحظات:

1. تعارضات في عناصر `sticky` تسبب تداخل/قفز بصري أثناء التمرير.
2. تضارب في تعريفات CSS لنفس الصنف يؤدي لنتائج غير متوقعة.
3. عدم اتساق الهوية البصرية بين الهيدر والفوتر (الشعار/العلامة).
4. استخدام أحجام خط صغيرة جدًا في أجزاء متكررة.
5. الاعتماد على ألوان hard-coded في عدة مكونات بدل توكنات التصميم.

---

## الملاحظات التفصيلية

## 1) تعارض sticky في صفحات البحث (مرتفع)
- **المشكلة:** شريط التبويبات/الفلاتر في الصفحات يستخدم `sticky` بقيم `top` لا تراعي ارتفاع Navbar الحالي.
- **الأثر:** قد يحدث تراكب بصري أو اختفاء جزئي عند بداية التمرير، خصوصًا مع ارتفاع هيدر 80px (`h-20`).
- **الدليل:**
  - Navbar بارتفاع `h-20`.  
  - `Judgments`: شريط التبويبات `sticky top-0`.  
  - `GazetteIndex`: شريط الفلاتر `sticky top-16`.
- **توصية:** توحيد offset باستخدام متغير واحد (مثل `--app-header-height`) وتطبيق `top-[var(--app-header-height)]` على كل الشرائط اللاصقة.

## 2) تضارب CSS لنفس الصنف `law-content-frame` (مرتفع)
- **المشكلة:** الصنف نفسه معرّف مرتين بقيم مختلفة داخل `@layer base` و`@layer components`.
- **الأثر:** سلوك بصري غير متوقع حسب ترتيب التحميل/الـ specificity، وصعوبة صيانة التصميم.
- **توصية:** الإبقاء على تعريف واحد فقط، أو تقسيمه إلى أصناف واضحة (`law-content-frame` + `law-content-frame--alt`).

## 3) عدم اتساق الهوية بين الهيدر والفوتر (متوسط)
- **المشكلة:** الهيدر يستخدم شعار SVG الجديد، بينما الفوتر ما زال يستخدم أيقونة `Scale` ونص مختلف.
- **الأثر:** انطباع علامة تجارية غير موحدة بصريًا.
- **توصية:** توحيد أصل الشعار عبر مكوّن `BrandMark` واحد يُستخدم في الهيدر والفوتر.

## 4) أحجام نصوص صغيرة جدًا في عناصر تفاعلية (متوسط)
- **المشكلة:** استخدام `text-[10px]` و`text-[11px]` في badges/metadata وروابط ثانوية.
- **الأثر:** ضعف القراءة على شاشات الجوال ومتصفحات بدقة عالية، خصوصًا للمحتوى العربي.
- **توصية:** رفع الحد الأدنى لنصوص الواجهة إلى `12px` للعناصر الثانوية و`14px` للنصوص التفاعلية.

## 5) ألوان hard-coded خارج Design Tokens (متوسط)
- **المشكلة:** وجود ألوان مباشرة مثل `bg-emerald-*`, `bg-amber-*`, `text-slate-*` وغيرها داخل الصفحات.
- **الأثر:** صعوبة توحيد الثيم، وتفاوت في التباين بين الأقسام.
- **توصية:** ربط الألوان بدلالات (semantic tokens): `--success`, `--warning`, `--info` بدل الاعتماد على عائلات ألوان متفرقة.

## 6) تباين منخفض في بعض النصوص الثانوية (متوسط)
- **المشكلة:** كثرة استخدام `text-muted-foreground` مع أحجام صغيرة داخل مناطق معلوماتية كثيفة.
- **الأثر:** انخفاض قابلية القراءة، خصوصًا عند الإضاءة العالية أو الشاشات المتوسطة الجودة.
- **توصية:** رفع التباين بمستوى واحد (`muted-foreground` أغمق) عندما يكون النص أصغر من 14px.

## 7) ازدياد الازدحام البصري في رأس صفحات البحث (متوسط)
- **المشكلة:** في صفحات البحث، يوجد: عنوان + شرح + حقل بحث + زر بحث حرفي + اقتراحات + إرشاد + إحصاءات ضمن مساحة رأس واحدة.
- **الأثر:** إرهاق بصري وتأخير الوصول للفعل الأساسي (البدء بالبحث).
- **توصية:** تقسيم الرأس إلى طبقتين: (1) البحث + زر الحرفي، (2) أدوات مساعدة قابلة للطي.

## 8) غياب حالات focus واضحة في بعض الأزرار المخصصة (متوسط)
- **المشكلة:** بعض الأزرار المكتوبة يدويًا (مثل أزرار الاقتراحات/المسح) لا تُظهر `focus-visible` واضح.
- **الأثر:** تجربة أضعف لمستخدمي لوحة المفاتيح وإمكانية وصول أقل.
- **توصية:** إضافة `focus-visible:outline`/`ring` موحد لكل الأزرار غير القياسية.

## 9) عدم ضبط واضح لسيناريوهات النصوص الطويلة داخل الشارات (منخفض)
- **المشكلة:** بعض الشرائح/الشارات قد تستقبل قيمًا طويلة (تصنيف/محكمة/دائرة) بلا قواعد كسر سطر واضحة.
- **الأثر:** تمدد أفقي أو قص غير جميل في الشاشات الصغيرة.
- **توصية:** إضافة `max-w`, `truncate`, و`title` tooltip أو `break-words` حيث يلزم.

## 10) تفاوت في الإزاحات الرأسية بين الصفحات (منخفض)
- **المشكلة:** اختلافات `pt/pb` بين صفحات متشابهة وظيفيًا (الأحكام/الكشاف).
- **الأثر:** شعور بعدم الثبات في إيقاع الواجهة.
- **توصية:** إنشاء Layout primitives موحدة (PageHeader/PageSection/PageContainer).

---

## مصفوفة الأولوية (ماذا يصلح أولًا)

1. **إصلاح sticky offsets + إزالة تضارب CSS** (أثر مرتفع، جهد منخفض-متوسط).  
2. **توحيد الهوية (الهيدر/الفوتر)** (أثر متوسط، جهد منخفض).  
3. **رفع قابلية القراءة (حجم/تباين النصوص الصغيرة)** (أثر مرتفع، جهد منخفض).  
4. **تنظيف ألوان hard-coded إلى tokens** (أثر متوسط، جهد متوسط).  
5. **تحسين الوصول keyboard focus** (أثر متوسط، جهد منخفض).

---

## خطة تحسين مقترحة (بدون تغيير المحتوى القانوني)

- **Sprint 1 (سريع):**
  - توحيد `sticky top`.
  - إزالة تعريف CSS المكرر.
  - ضبط أحجام النص الدنيا.
  - تحسين focus states.

- **Sprint 2 (هوية وتناسق):**
  - توحيد مكوّن العلامة التجارية.
  - تحويل الألوان الدلالية إلى tokens.
  - توحيد spacing عبر primitives.

- **Sprint 3 (تحسينات جودة):**
  - تدقيق contrast آلي (WCAG).
  - لقطات مرجعية Visual Regression لأهم الصفحات.

---

## تأكيد نطاق العمل

هذا التقرير **لا يتضمن أي تعديل** على النصوص النظامية أو القانونية، وهو مخصص لتشخيص مشاكل التنسيق والجرافيكس وتجربة الاستخدام فقط.
